use std.(
  option,
  http.(server, request, response),
)

fun root(connection) {
  name = match request.query(connection, "name") {
    option.Some(name) { name }
    option.None() { "world" }
  }

  connection
  |> response.status(200)
  |> response.write("Hello, {name}!")
}

fun main() {
  options = server.Options {
    host: [0, 0, 0, 0],
    port: 3000,
  }

  server.new()
  |> server.get("/", root)
  |> server.listen(options)
}
